<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Casino</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
  <script src="./js/casinojs.js"></script>
</head>

<body>

  <div class="container text-center">


    <h2> Current jackpot: Â£50000</h2>
    <h1 id=number>Welcome to Genie Jackpot!</h1>
    <h2 id=info></h2><!-- information tab-->
    <button id=button type="button" name="button">Spin</button>
    <!--<div class="radio bets">
      <input type="radio" name="bet" value="small">Big bet<br>
      <input type="radio" name="bet" value="big">Small bet<br>
    </div>     will implement bet function as well, either as a radio or a spinbox -->
    <button id=special type="button" name="button"></button>
    <h2 id=bankroll>Bankroll 0</h2>
    <button id=deposit type="button" name="button">Deposit</button>




  </div>






  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <script>
    /* function to generate an array,   Random generated number  found in this array, will trigger small or big win or special event with "free spins" */

    function range(start, end) {
      return Array(end - start + 1).fill().map((_, idx) => start + idx)
    }


    /*jackpot, if this variable is generated, you hit the jackpot*/
    var jackpot = "99999"; // 50000 bet multiplier  (jackpot icon visible in the corner, with each spin increase bet multiplier function)

    var smallwin = range(1, 4000); // 1.5 bet multiplier  4% chance to win a spin  (1 clients bet will use 4 spins)

    var bigwin = range(28000, 30000); // 10 bet multiplier  2% chance to win

    var extraspin = range(40000, 42000); // extra 20 spins, this will be a special feature, 20 auto spins with the special random multiplicator

    var bankroll = "0";



    /*this function will find out if player have enough money to play, if not, player will be encouraged to deposit before he can wager*/

    function randomnumber() {


      if (bankroll > 0) {
        spin();
      } else {
        alert("deposit first please")
      };

//function to generate a random number, game of chance itself

      function spin() {
        var startTime = new Date().getTime();
        var interval = setInterval(function() {
          if (new Date().getTime() - startTime > 5000) { //if no win subtract 1 from bankroll if min small bet clicked, subtract 2 if big bet clicked, in the future implement auto-spin feature as well
            clearInterval(interval);
            if (bankroll != "0") {
              bankroll -= 1
              document.getElementById("bankroll").innerHTML = bankroll;
            } else {
              alert("You have to make a deposit to play again")  //if bankroll falls to zero player will be encouraged to deposit again to keep playing
            }
            return;
          }
          var result = Math.floor(Math.random() * 100000);    //function that generates random number
          document.getElementById("number").innerHTML = result;
          if (result === jackpot) {   //chance to win a jackpot are 1 to 100000 still better than some pokerstars slots, good luck !:)
            clearInterval(interval);
            alert("jackpot");
            bankroll += 50000
          } else if (extraspin.includes(result)) {
            document.getElementById("special").innerHTML = "Your extra spin! Click here!"; // button will not be displayed, once player activate the special button, regular spin will dissappear and random number function will be replaced with the special event
            clearInterval(interval);
          } else if (bigwin.includes(result)) {
            document.getElementById("info").innerHTML = "BIG WIN!!!!!";
            if (bankroll != "0") {
              bankroll += 10
              document.getElementById("bankroll").innerHTML = bankroll;
            }
            clearInterval(interval);
          } else if (smallwin.includes(result)) {
            document.getElementById("info").innerHTML = "WIN!!!!!";
            if (bankroll != "0") {
              bankroll += 2
              document.getElementById("bankroll").innerHTML = bankroll;
            }
            clearInterval(interval);
          };

        }, 1000);
      }
    }


    /*jquery function to activate spin once button is clicked*/

    $(document).ready(function() {
      $('#button').click(function() {
        randomnumber();
        document.getElementById("info").innerHTML = ""; ////will add some spin animation
      });
    });


    /*jquery to activate deposit function once button bet clicked*/

    $(document).ready(function() {
      $('#deposit').click(function() {
        deposit();
      });
    });

//deposit function, bankroll variable will be adjusted after successful deposit, also bankroll will be adjusted while playing, either by losing or winning the game of chance.
    function deposit() {
      var deposit = prompt("Please enter your deposit"); //for now I will use prompt to deposit in the future I might implement something like a link to paypal, after successful deposit credit will be added to the bankroll
      deposit = parseFloat(deposit);
      bankroll = parseFloat(bankroll);
      bankroll = deposit + bankroll;
      document.getElementById("bankroll").innerHTML = bankroll;
    }
  </script>

</body>

</html>

